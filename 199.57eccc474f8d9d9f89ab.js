"use strict";(self.webpackChunkcerth_dataports_frontend_data_governance_use_case=self.webpackChunkcerth_dataports_frontend_data_governance_use_case||[]).push([[199],{9199:function(M,l,e){e.r(l),e.d(l,{UpdatePasswordModule:function(){return C}});var p=e(7853),r=e(1462),t=e(38),m=e(8481),h=e(162),b=e(2244),u=e(6726),g=e(8302),f=function(){function n(s,o,a,d){this.fb=s,this.authenticationService=o,this.dashboardService=a,this.logger=d,this.error="",this.isFormSubmitting=!1,this.remember=!1,this.form=this.fb.group({password:["",r.kI.required],newPassword:["",r.kI.required]})}return Object.defineProperty(n.prototype,"formControls",{get:function(){return this.form.controls},enumerable:!1,configurable:!0}),n.prototype.submit=function(s){var o=this;if(this.form.invalid)alert("Please fill in all required fields");else{var a=this.form.getRawValue();if(a.newPassword.length<5)alert("Password should consist of 5 characters or more");else{this.isFormSubmitting=!0;var c={previouspassword:a.password,newpassword:a.newPassword};console.log(c),this.authenticationService.updatePassword(c).subscribe(function(i){if(!1===i)return o.isFormSubmitting=!1,o.error="Authentication failed. Please try again.",void setTimeout(function(){o.error=""},2e3);o.isFormSubmitting=!1},function(i){console.log(i.status),403==i.status&&o.refreshTokens(),o.isFormSubmitting=!1,o.error="Authentication failed. Please try again.",o.logger.log(i),setTimeout(function(){o.error=""},2e3)})}}},n.prototype.refreshTokens=function(){this.dashboardService.refreshTokens().subscribe(function(s){console.log(s),localStorage.setItem("accessToken",s.accessToken),localStorage.setItem("refreshToken",s.refreshToken)})},n.\u0275fac=function(o){return new(o||n)(t.Y36(r.qu),t.Y36(m.$),t.Y36(h.s),t.Y36(b.m))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-update-password"]],decls:30,vars:9,consts:[[1,"login-layout"],[1,"content","shadow-center-25"],["id","formTitle",1,"text-center","bold"],[1,"font-red","font-size-13"],["novalidate","",3,"formGroup","ngSubmit"],[1,"c-form-control","d-flex"],["hidden",""],[1,"fas","fa-user","fa-fw"],["hidden","",1,"m-1"],[1,"flex-grow-1"],["type","password","formControlName","password",3,"placeholder"],["type","password","formControlName","newPassword",3,"placeholder"],[1,"text-center"],["pButton","","type","submit",1,"ui-button-success","ui-button-rounded","ui-button-raised",2,"width","150px",3,"disabled","label"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"span",3),t._uU(5),t.qZA(),t._UZ(6,"br"),t.TgZ(7,"form",4),t.NdJ("ngSubmit",function(c){return a.submit(c)}),t.TgZ(8,"h5"),t._uU(9,"Password *"),t.qZA(),t.TgZ(10,"div",5),t.TgZ(11,"span",6),t._UZ(12,"em",7),t.qZA(),t._UZ(13,"span",8),t.TgZ(14,"div",9),t._UZ(15,"input",10),t.qZA(),t.qZA(),t.TgZ(16,"h5"),t._uU(17,"New Password *"),t.qZA(),t.TgZ(18,"div",5),t.TgZ(19,"span",6),t._UZ(20,"em",7),t.qZA(),t._UZ(21,"span",8),t.TgZ(22,"div",9),t._UZ(23,"input",11),t.qZA(),t.qZA(),t._UZ(24,"br"),t._UZ(25,"br"),t._UZ(26,"br"),t.TgZ(27,"div",12),t._UZ(28,"button",13),t.ALo(29,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(3),t.Oqu("First Login"),t.xp6(2),t.Oqu(a.error),t.xp6(2),t.Q6J("formGroup",a.form),t.xp6(8),t.Q6J("placeholder",""),t.xp6(8),t.Q6J("placeholder",""),t.xp6(5),t.Q6J("disabled",a.isFormSubmitting)("label",t.lcZ(29,7,"Submit")))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,u.Hq],pipes:[g.X$],styles:['.login-layout[_ngcontent-%COMP%]{background-image:url("/assets/images/DataPorts/DataPorts - Logo-01.png");background-position:center;background-repeat:no-repeat;background-size:cover;height:100vh}.login-layout[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:350px;height:350px;background-color:#fffffff2;border-radius:15px;padding:30px 15px 0;position:absolute;left:0;right:0;top:0;bottom:0;margin:auto;max-width:100%;max-height:100%;overflow:auto}.login-layout[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding:0;margin:0;color:#e74424}.login-layout[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:inherit;margin-left:10px;font-size:22px}.login-layout[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;width:100%;display:block;outline:none!important;background:none}.login-layout[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-bottom:1px solid #6eb8c5}.login-layout[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#1e1d33!important;color:#fff!important;border-color:#1e1d33!important}.login-layout[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   #formTitle[_ngcontent-%COMP%]{color:#023f88}.c-form-control[_ngcontent-%COMP%]{border-bottom:1px solid #a3a3a3}']}),n}(),v=e(7352),P=e(1116),Z=e(4568),w=[{path:"",component:f,data:{}}],C=function(){function n(){}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[],imports:[[P.ez,g.aw.forChild(),p.Bz.forChild(w),r.UX,u.hJ,v.nD,Z.kW]]}),n}()}}]);